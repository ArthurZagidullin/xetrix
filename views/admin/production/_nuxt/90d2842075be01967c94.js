(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{188:function(t,e,r){var content=r(196);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(40).default)("3a4f7ecc",content,!0,{sourceMap:!1})},189:function(t,e,r){"use strict";var n={name:"simple",props:["order"],computed:{wsaccs:function(){return this.$store.state.objects.WsAccounts},id:function(){return this.order.id},buyerId:function(){return this.$auth.user.id},send:function(){var t=this,e=this.wsaccs.filter(function(a){return a.account.currency.symbol===t.to})[0];return!!e.account&&e.account.Address},receive:function(){var t=this,e=this.wsaccs.filter(function(a){return a.account.currency.symbol===t.from})[0];return!!e.account&&e.account.Address},from:function(){return this.order.sellCurrencySymbol},to:function(){return this.order.buyCurrencySymbol},available:function(){return this.order.available},price:function(){return this.order.price},query:function(){var q={};return q.orderId=this.id,q.sendingAddress=this.send,q.receiveAddress=this.receive,q.buyerId=this.buyerId,q.amount=this.amount,!!(!!q.amount<=this.available&&q.orderId&&q.sendingAddress&&q.receiveAddress&&q.orderId&&q.buyerId)&&q}},data:function(){return{amount:0}},methods:{buy:function(){if(this.query){this.$axios.post("/_v1/create_contract",this.query).catch(function(t){console.log(t)})}}}},c=r(22),o={name:"order",props:["order"],components:{ContractSimpleForm:Object(c.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{md6:""}},[r("v-text-field",{attrs:{solo:""},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1),t._v(" "),r("v-flex",{attrs:{md4:""}},[r("v-btn",{staticStyle:{height:"30px",width:"30px"},attrs:{small:"",fab:"",color:"white"},on:{click:t.buy}},[r("v-icon",[t._v("add")])],1)],1)],1)],1)},[],!1,null,"43ee2ebe",null).exports},computed:{isUser:function(){return this.order.ownerId===this.$auth.user.id},from:function(){return this.order.sellCurrencySymbol},to:function(){return this.order.buyCurrencySymbol},available:function(){return this.order.available},price:function(){return this.order.price}}},l=Object(c.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-layout",{attrs:{row:"","justify-space-between":""}},[r("v-flex",{staticClass:"grey white--text",attrs:{md3:""}},[r("v-card-title",[r("span",{staticClass:"title"},[t._v("Ордер")])])],1),t._v(" "),r("v-flex",{attrs:{md5:""}},[r("v-card-title",[r("v-layout",{attrs:{row:"","justify-space-between":""}},[r("v-flex",{attrs:{md2:""}},[r("p",{staticClass:"ma-0 text-xs-center"},[r("span",{staticClass:"title"},[t._v(t._s(t.available))]),t._v(" "),r("span",{staticClass:"subheading"},[t._v(t._s(t.from))])])]),t._v(" "),r("v-flex",{attrs:{md1:""}},[r("p",{staticClass:"text-xs-center ma-0"},[r("span",{staticClass:"title"},[t._v("по")])])]),t._v(" "),r("v-flex",{attrs:{md2:""}},[r("p",{staticClass:"ma-0 text-xs-center"},[r("span",{staticClass:"title"},[t._v(t._s(t.price))]),t._v(" "),r("span",{staticClass:"subheading"},[t._v(t._s(t.to))])])])],1)],1)],1),t._v(" "),t.isUser?r("v-flex",{staticClass:"green white--text",attrs:{md2:""}},[r("v-card-title",{staticClass:"text-xs-right"},[r("p",{staticClass:"text-md-right ma-0"},[r("v-icon",[t._v("person")])],1)])],1):r("v-flex",{staticClass:"orange white--text",attrs:{md2:""}},[t.available>0?[r("v-card-title",{staticClass:"text-xs-right"},[r("p",{staticClass:"text-md-right ma-0"},[t._v("\n              Купить "+t._s(t.from)+"\n            ")])]),t._v(" "),r("v-card-title",[r("ContractSimpleForm",{attrs:{order:t.order}})],1)]:t._e()],2)],1)],1)},[],!1,null,"1178bba0",null);e.a=l.exports},190:function(t,e,r){"use strict";r(23);var n={name:"acc",props:["acc"],computed:{currency:function(){return this.acc.account.currency.name},symbol:function(){return this.acc.account.currency.symbol},available:function(){return this.acc.balance.available>0?this.acc.balance.available:0},locked:function(){return this.acc.balance.locked>0?this.acc.balance.locked:0},address:function(){return this.acc.account.Address}},data:function(){return{paymentDialog:!1}}},c=r(22),component=Object(c.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",["RUB"==t.symbol?r("v-dialog",{attrs:{width:"500"},model:{value:t.paymentDialog,callback:function(e){t.paymentDialog=e},expression:"paymentDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"title"},[t._v("Платеж")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-icon",{on:{click:function(e){t.paymentDialog=!t.paymentDialog}}},[t._v("close")])],1),t._v(" "),r("v-card-text",[r("iframe",{attrs:{src:"https://money.yandex.ru/quickpay/shop-widget?writer=seller&targets="+t.address+"&label="+t.address+"&targets-hint=&default-sum=2&button-text=11&payment-type-choice=on&hint=&successURL=&quickpay=shop&account=410018657112160",width:"423",height:"222",frameborder:"0",allowtransparency:"true",scrolling:"no"}})])],1)],1):t._e(),t._v(" "),r("v-card",[r("v-card-title",{staticClass:"grey white--text"},[r("v-flex",{attrs:{md3:""}},[r("span",{staticClass:"title"},[t._v("Счет")])]),t._v(" "),r("v-spacer"),t._v(" "),r("v-flex",[r("p",{staticClass:"text-xs-right ma-0"},[r("span",{staticClass:"title"},[r("b",[t._v(t._s(t.currency))])])])])],1),t._v(" "),r("v-card-text",{},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{md2:"","d-flex":""}},[r("p",{staticClass:"text-xs-left"},[t._v(t._s(t.symbol))])]),t._v(" "),r("v-flex",{attrs:{md3:"","d-flex":""}},[t._v("Доступно:")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-flex",{staticClass:"text-xs-right",attrs:{md6:"","d-flex":""}},[r("p",{staticClass:"text-xs-right"},[r("b",[t._v(t._s(t.available))])])])],1),t._v(" "),r("v-layout",{staticClass:"mt-3",attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{md2:"","d-flex":""}},[r("p",{staticClass:"text-xs-left"},[t._v(t._s(t.symbol))])]),t._v(" "),r("v-flex",{attrs:{md3:"","d-flex":""}},[t._v("Заблокировано:")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-flex",{attrs:{md6:"","d-flex":""}},[r("p",{staticClass:"text-xs-right"},[r("b",[t._v(t._s(t.locked))])])])],1)],1),t._v(" "),r("v-card-actions",{staticClass:"grey lighten-2 pa-0"})],1)],1)},[],!1,null,"2189e875",null);e.a=component.exports},195:function(t,e,r){"use strict";var n=r(188);r.n(n).a},196:function(t,e,r){(t.exports=r(39)(!1)).push([t.i,".m1[data-v-e85ad32a]{margin-top:20px}",""])},200:function(t,e,r){"use strict";r.r(e);r(70);var n=r(190),c=(r(107),r(12),{name:"orderForm",props:["accs"],computed:{currencies:function(){var t=[];return this.accs.forEach(function(a){t.findIndex(function(t){return a.account.currency.symbol===t.symbol})<0&&t.push(a.account.currency)}),t},toList:function(){var t=this;return this.from?this.currencies.filter(function(e){return e.symbol!==t.from}):this.currencies},send:function(){var t=this;if(this.from){var e=this.accs.filter(function(a){return a.account.currency.symbol===t.from})[0];if(e.account)return e.account.Address}return!1},receive:function(){var t=this;if(this.to){var e=this.accs.filter(function(a){return a.account.currency.symbol===t.to})[0];if(e.account)return e.account.Address}return!1},query:function(){var q={};return q.sendingAddress=this.send,q.receiveAddress=this.receive,q.amount=this.amount,q.price=this.price,console.log(q),!!(q.sendingAddress&&q.receiveAddress&&q.price&&q.amount)&&q}},data:function(){return{amount:0,price:0,from:"",to:""}},methods:{open:function(){var q=this.query;if(this.query){this.$axios.post("/_v1/create_order",q).then(function(t){console.log(t)})}}}}),o=r(22),l=Object(o.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-card-title",{staticClass:"grey white--text pb-0"},[r("v-layout",{attrs:{row:""}},[r("v-flex",[r("span",{staticClass:"title"},[t._v("Размещение ордера")])]),t._v(" "),r("v-flex",[r("p",{staticClass:"text-xs-right"},[r("v-btn",{staticClass:"ma-0",attrs:{color:"primary",disabled:!t.query,small:""},on:{click:t.open}},[t._v("Опубликовать")])],1)])],1)],1),t._v(" "),r("v-card-text",{staticClass:"pl-3 pr-3 pb-0"},[r("v-layout",{attrs:{row:"",wrap:"","justify-space-between":""}},[r("v-flex",{attrs:{md5:""}},[r("p",{staticClass:"ma-0 mb-2"},[t._v("\n          Что продаем?\n        ")]),t._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{"d-flex":"",md6:""}},[r("v-text-field",{attrs:{label:"Кол-во",solo:"",disabled:!t.from},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1),t._v(" "),r("v-flex",{attrs:{"d-flex":"",md6:""}},[r("v-select",{staticClass:"elevation-0",attrs:{items:t.currencies,"item-text":"symbol","item-value":"symbol",label:"Продам",solo:""},model:{value:t.from,callback:function(e){t.from=e},expression:"from"}})],1)],1)],1),t._v(" "),r("v-flex",{attrs:{md1:""}},[r("p",{staticClass:"mt-5 mr-0 ml-0 text-xs-center"},[t._v("за")])]),t._v(" "),r("v-flex",{attrs:{md5:""}},[r("p",{staticClass:"text-xs-right ma-0 mb-2"},[t._v("\n          Почем?\n        ")]),t._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{"d-flex":"",md6:""}},[r("v-text-field",{staticClass:"elevation-0",attrs:{label:"Цена за ед.",solo:"",disabled:!t.to},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1),t._v(" "),r("v-flex",{attrs:{"d-flex":"",md6:""}},[r("v-select",{attrs:{items:t.toList,"item-text":"symbol","item-value":"symbol",label:"Куплю",solo:"",disabled:!t.from},model:{value:t.to,callback:function(e){t.to=e},expression:"to"}})],1)],1)],1)],1),t._v(" "),r("v-layout",{attrs:{row:"",wrap:"","justify-space-between":""}})],1),t._v(" "),r("v-card-actions",{staticClass:"pt-0"},[r("v-spacer")],1)],1)},[],!1,null,"1ca5e71c",null).exports,v=r(189),d={name:"index",components:{Acc:n.a,OrderForm:l,Order:v.a},data:function(){return{paysystems:[]}},computed:{users:function(){return this.$store.state.objects.users},WsAccounts:function(){return this.$store.state.objects.WsAccounts},orders:function(){return this.$store.state.objects.orders},contracts:function(){return this.$store.state.objects.contracts},txs:function(){return this.$store.state.objects.txs}}},f=(r(195),Object(o.a)(d,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",[r("v-flex",{attrs:{md10:""}},[r("v-layout",{attrs:{row:"",wrap:"","justify-space-between":""}},[r("v-flex",{attrs:{md2:""}},[t._v("\n        Участники ("+t._s(t.users.length)+")\n      ")]),t._v(" "),r("v-flex",{attrs:{md2:""}},[t._v("\n        Ордера ("+t._s(t.orders.length)+")\n      ")]),t._v(" "),r("v-flex",{attrs:{md2:""}},[t._v("\n        Контракты ("+t._s(t.contracts.length)+")\n      ")]),t._v(" "),r("v-flex",{attrs:{md2:""}},[t._v("\n        Транзакции ("+t._s(t.txs.length)+")\n      ")])],1)],1)],1)},[],!1,null,"e85ad32a",null));e.default=f.exports}}]);